{% extends "base.html" %}
{% block content %}

<div class="admin-dashboard">

  <!-- Header -->
  <div class="dashboard-header">
    <h2>Admin Dashboard</h2>
    <a href="{{ url_for('admin_logout') }}" class="logout-btn">Logout</a>
  </div>

  <!-- Stats -->
  <div class="stats-grid">
    {% for s in stats %}
      <div class="stat-card">
        <span class="stat-title">{{ s.status }}</span>
        <span class="stat-count">{{ s.total }}</span>
      </div>
    {% endfor %}
  </div>

  <!-- Main Content -->
  <div class="dashboard-content">

    <!-- Issues -->
    <div class="dashboard-card">
      <div class="card-header">
        <h4>Recent Issues</h4>
      </div>

      <div class="issue-list">
        {% for i in issues %}
          <div class="issue-item">
            <div>
              <strong>{{ i.category }}</strong>
              <span class="issue-status {{ i.status|lower }}">{{ i.status }}</span>
              <div class="issue-meta">
                {{ i.location or 'â€”' }} | {{ i.created_at }}
              </div>
            </div>
            <a href="{{ url_for('admin_issue_detail', issue_id=i.id) }}" class="open-link">Open</a>
          </div>
        {% else %}
          <p class="empty-text">No issues reported.</p>
        {% endfor %}
      </div>
    </div>

    <!-- Notices -->
    <div class="dashboard-card">
      <div class="card-header">
        <h4>Notices</h4>
        <a href="{{ url_for('admin_notices') }}" class="primary-btn">
          Manage Notices
        </a>
      </div>

      <ul class="notice-list">
        {% for n in notices %}
          <li>
            <strong>{{ n.title }}</strong>
            <small>{{ n.created_at }}</small>
          </li>
        {% else %}
          <li class="empty-text">No notices available.</li>
        {% endfor %}
      </ul>
    </div>

  </div>

</div>

{% endblock %}
