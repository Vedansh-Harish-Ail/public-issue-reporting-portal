<!-- templates/admin/dashboard.html -->
{% extends "base.html" %}
{% block content %}
<h3>Admin dashboard</h3>
<div class="mb-3">
  <a class="btn btn-outline-danger" href="{{ url_for('admin_logout') }}">Logout</a>
</div>
<div class="row">
  <div class="col-md-4">
    <div class="card mb-3"><div class="card-body">
      <h6>Status summary</h6>
      <ul class="list-group list-group-flush">
        {% for s in stats %}
          <li class="list-group-item d-flex justify-content-between">
            <span>{{ s.status }}</span><span class="badge bg-secondary">{{ s.total }}</span>
          </li>
        {% endfor %}
      </ul>
    </div></div>
  </div>
  <div class="col-md-8">
    <div class="card mb-3"><div class="card-body">
      <h6>Recent issues</h6>
      <ul class="list-group">
        {% for i in issues %}
          <li class="list-group-item">
            <strong>{{ i.category }}</strong> — <span class="badge bg-info">{{ i.status }}</span><br>
            <small class="text-muted">{{ i.location or '—' }} | {{ i.created_at }}</small><br>
            <a href="{{ url_for('admin_issue_detail', issue_id=i.id) }}">Open</a>
          </li>
        {% endfor %}
      </ul>
    </div></div>
    <div class="card"><div class="card-body">
      <h6>Notices</h6>
      <a class="btn btn-sm btn-success mb-2" href="{{ url_for('admin_notices') }}">Manage notices</a>
      <ul class="list-group">
        {% for n in notices %}
          <li class="list-group-item"><strong>{{ n.title }}</strong><br><small class="text-muted">{{ n.created_at }}</small></li>
        {% endfor %}
      </ul>
    </div></div>
  </div>
</div>
{% endblock %}
