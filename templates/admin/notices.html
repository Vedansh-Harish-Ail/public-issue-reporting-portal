<!-- templates/admin/notices.html -->
{% extends "base.html" %}

{% block content %}

<div class="admin-dashboard-container"
  style="display: grid; grid-template-columns: 250px 1fr; gap: 30px; padding: 40px; min-height: 80vh; max-width: 1400px; margin: auto;">

  <!-- Sidebar (Reusable for consistency) -->
  <aside class="admin-sidebar"
    style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); height: fit-content;">
    <div style="text-align: center; margin-bottom: 30px;">
      <h3 style="color: var(--primary-color); margin: 0; font-family: var(--font-serif);">Admin Panel</h3>
      <small style="color: #666;">Manage Notices</small>
    </div>

    <nav class="admin-nav">
      <ul style="list-style: none; padding: 0;">
        <li style="margin-bottom: 10px;">
          <a href="{{ url_for('admin_dashboard') }}"
            style="display: block; padding: 12px; color: #555; text-decoration: none; transition: 0.2s;"
            onmouseover="this.style.color='var(--primary-color)'" onmouseout="this.style.color='#555'">
            ðŸ“Š Dashboard
          </a>
        </li>
        <li style="margin-bottom: 10px;">
          <a href="{{ url_for('admin_notices') }}"
            style="display: block; padding: 12px; background: #eef2f7; color: var(--primary-color); border-radius: 8px; font-weight: 600; text-decoration: none;">
            ðŸ“¢ Manage Notices
          </a>
        </li>
        <li style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <a href="{{ url_for('admin_logout') }}"
            style="display: block; padding: 12px; color: #c53030; text-decoration: none; font-weight: 500;">
            ðŸšª Logout
          </a>
        </li>
      </ul>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="dashboard-main" style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">

    <!-- Create Notice Form -->
    <div class="notice-create"
      style="background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); height: fit-content;">
      <h4 style="margin-top: 0; margin-bottom: 20px; color: var(--primary-color);">Publish Announcement</h4>

      <form method="post">
        <div class="form-group">
          <label style="font-size: 13px; font-weight: 600; color: #444; margin-bottom: 8px; display: block;">Notice
            Title</label>
          <input type="text" name="title" required placeholder="Ex. Gram Sabha Meeting..."
            style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px;">
        </div>

        <div class="form-group">
          <label style="font-size: 13px; font-weight: 600; color: #444; margin-bottom: 8px; display: block;">Notice
            Details</label>
          <textarea name="description" rows="6" required placeholder="Enter full notice content here..."
            style="width: 100%; border: 1px solid #ddd; border-radius: 8px; padding: 12px; font-family: inherit; box-sizing: border-box;"></textarea>
        </div>

        <button type="submit" class="primary-btn" style="width: 100%; justify-content: center;">Publish Now</button>
      </form>
    </div>

    <!-- Notice History -->
    <div class="notice-list-container"
      style="background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05);">
      <h4 style="margin-top: 0; margin-bottom: 20px; color: #333;">Active Notices</h4>

      <div class="notice-list" style="max-height: 600px; overflow-y: auto;">
        {% for n in notices %}
        <div class="notice-item" style="border-bottom: 1px solid #eee; padding-bottom: 20px; margin-bottom: 20px;">
          <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
            <strong style="font-size: 16px; color: var(--primary-color);">{{ n.title }}</strong>
            <small style="color: #888; font-size: 12px;">{{ n.created_at[:10] }}</small>
          </div>
          <p style="margin: 0; font-size: 14px; color: #555; line-height: 1.5;">{{ n.description }}</p>
        </div>
        {% else %}
        <p class="text-muted" style="text-align: center; padding: 20px;">No public notices have been published yet.</p>
        {% endfor %}
      </div>
    </div>

  </main>
</div>

{% endblock %}